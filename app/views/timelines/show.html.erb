<% if notice %>
<p id="notice"><%= notice %></p>
<% end %>

<html lang='en'>
<head>
<meta charset="utf-8" />

<!-- OPTIONALLY FOR CHECKBOX-STYLE LEGEND ITEMS 
<link rel="stylesheet" href="css/tg_legend_checkboxes.css" type="text/css" media="screen" charset="utf-8">
-->
<style type='text/css'>
    #p1 {
      height:563px;
    }
    </style>


    <script type="text/javascript">

        $(function(){

            $("#extruderLeft").buildMbExtruder({
                position:"left",
                width:280,
                extruderOpacity:.7,
                hidePanelsOnClose:true,
                accordionPanels:true,
                onExtOpen:function(){},
                onExtContentLoad:function(){$("#extruderLeft1").openPanel();},
                onExtClose:function(){}
            });



        });


        $(function(){

            $("#extruderLeft1").buildMbExtruder({
                position:"left",
                width:280,
                extruderOpacity:.7,
                hidePanelsOnClose:true,
                accordionPanels:true,
                onExtOpen:function(){},
                onExtContentLoad:function(){$("#extruderLeft1").openPanel();},
                onExtClose:function(){}
            });



        });


    </script>

</head>
<body>

<div id='p1'></div>


<p></p>

  <script type='text/javascript'>
  
   
  $(function () { 
  
    var tg_instance = {};
    


    tg1 = $("#p1").timeline({

        "min_zoom":14, 
        "max_zoom":45, 
        "icon_folder":"http://localhost:3000/icons/",
        "data_source":"http://localhost:3000/timelines/<%=@timeline.id%>.json",
        "show_footer":true,
        "display_zoom_level":true,
        "mousewheel":"zoom", // zoom | pan | none
        "constrain_to_data":false,
        "legend":{type:"default"}, // default | checkboxes
        "loaded":function () { 
          // loaded callback function
         }

    })

    
    }); // end document-ready

</script>


<div id="extruderLeft" class="a {title:'Тайм Лайны'}" >
  <h3>Информация:</h3>
    <%= render partial: 'timelines/timeline', locals: {timeline: @timeline} if (@timeline) %>
  <style type="text/css">
    .extruder .text{
                    background-color: white;
                    color:black;
                    padding:30px;
                    padding-bottom:1000px;
                    border-bottom:1px solid #333333;}
  </style>
</div>


<div id="extruderLeft1" class="a {title:'События'}" >
  <h3>События:</h3>
  <table class="table table-striped">
    <% @timeline.time_points.each do |time_point| %>
      <tr>
        <td><%= time_point.title %></td>
        <td>
          <div class="btn-group">
          <%= link_to t('.редакт.', :default => t("helpers.links.редакт.")),
                      edit_time_point_path(time_point), :class => 'btn btn' %>
          <%= link_to t('.удалить', :default => t("helpers.links.удалить")),
                      time_point_path(time_point),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Вы уверены ?')) },
                      :class => 'btn btn-danger' %>
          </div>
        </td>
      </tr>
    <% end %>

    <% @timeline.time_items.each do |time_item| %>
      <tr>

        <td><%= time_item.title %></td>
        <td>
          <div class="btn-group">
          <%= link_to t('.Редакт.', :default => t("helpers.links.Редакт.")),
                      edit_time_item_path(time_item), :class => 'btn btn' %>
          <%= link_to t('.Удалить', :default => t("helpers.links.Удалить")),
                      time_item_path(time_item),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Вы уверены?')) },
                      :class => 'btn btn-danger' %>
          </div>
        </td>
      </tr>
    <% end %>
  </table>
  <style type="text/css">
    .extruder .text{
                    background-color: white;
                    color:black;
                    padding:20px;
                    padding-bottom:1000px;
                    border-bottom:1px solid #333333;}
  </style>
</div>


</body>
</html>












